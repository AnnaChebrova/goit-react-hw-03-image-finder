(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{3:function(e,t,a){e.exports={App:"styles_App__1X_52",Searchbar:"styles_Searchbar__1oabO",SearchForm:"styles_SearchForm__3iHwX",SearchFormButton:"styles_SearchFormButton__3ITso",SearchFormBtnLabel:"styles_SearchFormBtnLabel__1BfM3",SearchFormInput:"styles_SearchFormInput__2i35-","SearchForm-input":"styles_SearchForm-input__Qtri1",ImageGallery:"styles_ImageGallery__7AWVP",ImageGalleryItem:"styles_ImageGalleryItem__3K9gf",ImageGalleryItemImage:"styles_ImageGalleryItemImage__12SZh","ImageGalleryItem-image":"styles_ImageGalleryItem-image__28r3K",Overlay:"styles_Overlay__3LiIH",Modal:"styles_Modal__faJwT",Button:"styles_Button__Y69-a",ModalContent:"styles_ModalContent__2HWkY"}},66:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(9),c=a.n(o),s=a(10),l=a(5),i=a(6),u=a(8),h=a(7),m=a(3),d=a.n(m),g=a(0),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleNameChange=function(t){e.setState({searchQuery:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.searchQuery),e.setState({searchQuery:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsx)("header",{className:d.a.Searchbar,onSubmit:this.handleSubmit,children:Object(g.jsxs)("form",{className:d.a.SearchForm,children:[Object(g.jsx)("button",{type:"submit",className:d.a.SearchFormButton,children:Object(g.jsx)("span",{className:d.a.SearchFormBtnLabel,children:"Search"})}),Object(g.jsx)("input",{className:d.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchQuery,onChange:this.handleNameChange})]})})}}]),a}(n.a.Component),b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(g.jsx)("button",{type:"button",className:d.a.Button,onClick:this.props.onClick,children:"Load more"})}}]),a}(n.a.Component),j=function(e){var t=e.children;return Object(g.jsx)("ul",{className:d.a.ImageGallery,children:t})},p=function(e){var t=e.onClick,a=e.src,r=e.alt,n=e.url;return Object(g.jsx)("li",{className:d.a.ImageGalleryItem,children:Object(g.jsx)("img",{onClick:t,src:a,alt:r,className:d.a.ImageGalleryItemImage,url:n})})},f=document.querySelector("#modal-root"),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt;return Object(o.createPortal)(Object(g.jsx)("div",{className:d.a.Overlay,onClick:this.handleBackdropClick,children:Object(g.jsx)("div",{className:d.a.ModalContent,children:Object(g.jsx)("img",{src:t,alt:a})})}),f)}}]),a}(n.a.Component),_=a(21),I=a.n(_),v=function(){return Object(g.jsx)(I.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:3e3})},S=a(12),w=a.n(S);w.a.defaults.baseURL="https://pixabay.com/api/";var C={fetchImages:function(e){var t=e.searchQuery,a=void 0===t?"":t,r=e.currentPage,n=void 0===r?1:r;return w.a.get("?q=".concat(a,"&page=").concat(n,"&key=").concat("21945016-35782941565d1dfa523c4c56b","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits}))}},k=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={images:[],currentPage:1,currentPageImages:[],searchQuery:"",isLoading:!1,error:null,largeImage:"",showModal:!1,modalUrl:"",modalAlt:""},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.handleFormSubmit=function(t){e.setState({searchQuery:t,currentPage:1,images:[],error:null})},e.fetchImages=function(){var t=e.state,a={searchQuery:t.searchQuery,currentPage:t.currentPage};e.setState({loading:!0}),C.fetchImages(a).then((function(t){e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(t)),currentPage:e.currentPage+1,currentPageImages:Object(s.a)(t)}})),0===t.length&&e.setState({error:"Nothing was find"})})).catch((function(t){return e.setState({error:t.message})})).finally((function(){e.setState({isLoading:!1})}))},e.onClickImageGalleryItem=function(t){e.setState({modalUrl:t.currentTarget.getAttribute("url"),modalAlt:t.currentTarget.getAttribute("alt")}),e.toggleModal()},e.scrollWindow=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchImages(),t.currentPage>2&&this.scrollWindow()}},{key:"render",value:function(){var e=this,t=this.state,a=t.images,r=t.searchQuery,n=t.currentPageImages,o=t.isLoading,c=t.error,s=t.showModal,l=t.modalAlt,i=t.modalUrl,u=!(n.length<12)&&!o;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(y,{onSubmit:this.handleFormSubmit}),c&&Object(g.jsxs)("p",{children:[" something went wrong ... ",c," "]}),Object(g.jsx)(j,{children:a.map((function(t){var a=t.id,r=t.tags,n=t.webformatURL,o=t.largeImageURL;return Object(g.jsx)(p,{alt:r,src:n,url:o,onClick:e.onClickImageGalleryItem},a)}))}),o&&Object(g.jsx)(v,{name:r}),u&&Object(g.jsx)(b,{onClick:this.fetchImages}),s&&Object(g.jsx)(O,{onClose:this.toggleModal,src:i,alt:l,children:Object(g.jsx)("button",{type:"button",onClick:this.toggleModal,children:"Close"})})]})}}]),a}(n.a.Component);a(65);c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(k,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.64fb71f2.chunk.js.map